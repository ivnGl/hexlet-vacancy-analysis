# Инструкция по использованию pre-commit
Pre-commit — это инструмент для автоматической проверки кода перед коммитом. Он помогает поддерживать единый стиль кода, выявлять ошибки и автоматически исправлять их с помощью хуков (hooks).
## Установка
### Установка hooks
Чтобы установить pre-commit hooks в ваш репозиторий, выполните команду:
```
uv run pre-commit install
```
Это добавит hooks в .git/hooks и активирует их для автоматической проверки перед каждым коммитом.

### Отключение hooks
Если необходимо временно отключить pre-commit hooks, используйте команду:
```
uv run pre-commit uninstall
```

### Проверка всех файлов в репозитории
Чтобы запустить pre-commit для всех файлов в репозитории, используйте:
```
uv run pre-commit run --all-files
```
Это поможет выявить и исправить проблемы во всех файлах, а не только в тех, которые изменены в текущем коммите.

## Использование
### Стандартный рабочий процесс

Добавьте файлы для коммита:
```
git add .
```

Попытка коммита:
```
git commit -m "Ваше сообщение коммита"
```

### Если коммит не прошел (появились ошибки)
Если хук завершился с ошибкой, детали можно найти в выводе команды или в логах (обычно в консоли).

Сценарий 1: Автоматически исправляемые ошибки

Когда hooks могут самостоятельно исправить проблемы:
```
trim trailing whitespace.................................................Passed
fix end of files.........................................................Failed
- hook id: end-of-file-fixer
- exit code: 1
- files were modified by this hook

Fixing file1.py
Fixing file2.js
```
Что делать:

Добавьте исправленные файлы:
```
git add file1.py file2.js
```

Повторите коммит:
```
git commit -m "Ваше сообщение коммита"
```

Сценарий 2: Требуется ручное исправление

Когда hooks обнаружили ошибки, которые не могут быть исправлены автоматически:
```
ruff....................................................................Failed
- hook id: ruff
- exit code: 1
- files were modified by this hook

Would reformat: src/app.py
```
Что делать:

Исправить вручную.

Добавьте исправленные файлы и повторите коммит:
```
git add src/app.py
git commit -m "Ваше сообщение коммита"
```

## Пропуск pre-commit hooks (если срочно нужно закоммитить):
```
git commit --no-verify -m "Срочный коммит"
```
